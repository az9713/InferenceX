dsr1-fp4-b200-dynamo-trt:
  image: nvcr.io/nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post1
  model: deepseek-r1-fp4
  model-prefix: dsr1
  runner: b200-multinode-slurm
  precision: fp4
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [1214]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/mtp/ctx1_gen2_dep8_batch64_eplb0_mtp2.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/mtp/ctx1_gen2_dep8_batch64_eplb0_mtp2.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [875]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/mtp/ctx1_gen5_dep8_batch16_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/mtp/ctx1_gen5_dep8_batch16_eplb0_mtp3.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [6]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/mtp/ctx1_gen5_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/mtp/ctx1_gen5_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [10, 15, 25, 45, 90, 180]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/mtp/ctx1_gen5_tep8_batch32_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/mtp/ctx1_gen5_tep8_batch32_eplb0_mtp3.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [ 4968 ]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/mtp/ctx3_gen4_dep8_batch128_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/mtp/ctx3_gen4_dep8_batch128_eplb0_mtp1.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [10860]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/mtp/ctx3_gen5_dep4_batch512_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/mtp/ctx3_gen5_dep4_batch512_eplb0_mtp1.yaml"
      decode:
        num-worker: 5
        tp: 4
        ep: 4
        dp-attn: true

    # Non-MTP configurations
    - conc-list: [4096]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen1_dep8_batch512_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen1_dep8_batch512_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [2192]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen2_dep8_batch128_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen2_dep8_batch128_eplb0_mtp0.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [1365]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen5_dep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen5_dep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [6]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen5_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen5_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [10, 15, 25, 45, 90, 180]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen5_tep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen5_tep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [450]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen6_tep8_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/1k1k/stp/ctx1_gen6_tep8_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: false

  - isl: 8192
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [90]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/mtp/ctx1_gen1_dep8_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/mtp/ctx1_gen1_dep8_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [66]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/mtp/ctx1_gen3_tep8_batch16_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/mtp/ctx1_gen3_tep8_batch16_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [6]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/mtp/ctx1_gen5_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/mtp/ctx1_gen5_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [10, 15, 30, 60]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/mtp/ctx1_gen5_tep8_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/mtp/ctx1_gen5_tep8_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [548]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/mtp/ctx3_gen1_dep8_batch64_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/mtp/ctx3_gen1_dep8_batch64_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1096, 1691]
      prefill:
        num-worker: 5
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/mtp/ctx5_gen1_dep8_batch192_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/mtp/ctx5_gen1_dep8_batch192_eplb0_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [658]
      prefill:
        num-worker: 5
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/mtp/ctx5_gen2_dep8_batch32_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/mtp/ctx5_gen2_dep8_batch32_eplb0_mtp3.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true

    # Non-MTP configurations
    - conc-list: [6]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/stp/ctx1_gen5_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/stp/ctx1_gen5_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [10, 15, 25, 50, 100]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/stp/ctx1_gen5_tep8_batch8_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/stp/ctx1_gen5_tep8_batch8_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [370]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/stp/ctx2_gen5_tep8_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/stp/ctx2_gen5_tep8_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [1606]
      prefill:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/stp/ctx4_gen1_dep8_batch192_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/stp/ctx4_gen1_dep8_batch192_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [837]
      prefill:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/stp/ctx4_gen3_dep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/stp/ctx4_gen3_dep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [2222]
      prefill:
        num-worker: 7
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp4/8k1k/stp/ctx7_gen2_dep8_batch128_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp4/8k1k/stp/ctx7_gen2_dep8_batch128_eplb0_mtp0.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true

dsr1-fp8-b200-dynamo-trt:
  image: nvcr.io/nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post2
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: b200-multinode-slurm
  precision: fp8
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # MTP configurations - Low latency (TP attention)
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen8_tp8_batch1_eplb0_mtp3_8.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen8_tp8_batch1_eplb0_mtp3_8.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [32]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen8_tp8_batch4_eplb0_mtp3_32.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen8_tp8_batch4_eplb0_mtp3_32.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [64]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen8_tp8_batch8_eplb0_mtp3_64.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen8_tp8_batch8_eplb0_mtp3_64.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen8_tp8_batch32_eplb0_mtp3_256.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen8_tp8_batch32_eplb0_mtp3_256.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    # MTP configurations - High throughput (DP attention)
    - spec-decoding: "mtp"
      conc-list: [896]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen7_dep8_batch128_eplb0_mtp3_896.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen7_dep8_batch128_eplb0_mtp3_896.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1024]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen4_dep8_batch256_eplb0_mtp3_1024.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen4_dep8_batch256_eplb0_mtp3_1024.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1184]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen3_dep8_batch384_eplb0_mtp3_1184.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen3_dep8_batch384_eplb0_mtp3_1184.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1600]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen2_dep8_batch768_eplb0_mtp2_1600.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/mtp/ctx1_gen2_dep8_batch768_eplb0_mtp2_1600.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true

    # Non-MTP (STP) configurations - Low latency (TP attention)
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen3_tp8_batch1024_eplb0_mtp0_4.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen3_tp8_batch1024_eplb0_mtp0_4.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [32]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen3_tp8_batch1024_eplb0_mtp0_32.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen3_tp8_batch1024_eplb0_mtp0_32.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [128]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen3_tp8_batch1024_eplb0_mtp0_128.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen3_tp8_batch1024_eplb0_mtp0_128.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 1
        dp-attn: false
    # Non-MTP (STP) configurations - High throughput (DP attention)
    - conc-list: [1920]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen5_dep8_batch48_eplb0_mtp0_1920.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen5_dep8_batch48_eplb0_mtp0_1920.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [4096]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen1_dep8_batch512_eplb0_mtp0_4096.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/stp/ctx1_gen1_dep8_batch512_eplb0_mtp0_4096.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [5152]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/1k1k/stp/ctx2_gen5_dep8_batch128_eplb0_mtp0_5152.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/1k1k/stp/ctx2_gen5_dep8_batch128_eplb0_mtp0_5152.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true

  - isl: 8192
    osl: 1024
    search-space:
    # MTP configurations - Low latency (TP attention)
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/mtp/ctx1_gen6_tp8_batch8_eplb0_mtp3_8.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/mtp/ctx1_gen6_tp8_batch8_eplb0_mtp3_8.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/mtp/ctx1_gen2_tp8_batch32_eplb0_mtp3_8.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/mtp/ctx1_gen2_tp8_batch32_eplb0_mtp3_8.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [48]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/mtp/ctx1_gen6_tp8_batch8_eplb0_mtp3_48.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/mtp/ctx1_gen6_tp8_batch8_eplb0_mtp3_48.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [64]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/mtp/ctx1_gen4_tp8_batch16_eplb0_mtp3_64.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/mtp/ctx1_gen4_tp8_batch16_eplb0_mtp3_64.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 1
        dp-attn: false
    # MTP configurations - High throughput (DP attention)
    - spec-decoding: "mtp"
      conc-list: [224]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/mtp/ctx2_gen3_dep8_batch8_eplb0_mtp3_224.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/mtp/ctx2_gen3_dep8_batch8_eplb0_mtp3_224.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [288]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/mtp/ctx2_gen1_dep8_batch32_eplb0_mtp3_288.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/mtp/ctx2_gen1_dep8_batch32_eplb0_mtp3_288.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1088]
      prefill:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/mtp/ctx4_gen1_dep8_batch128_eplb0_mtp2_1088.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/mtp/ctx4_gen1_dep8_batch128_eplb0_mtp2_1088.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

    # Non-MTP (STP) configurations - Low latency (TP attention)
    - conc-list: [1]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen1_tp8_batch1_eplb0_mtp0_1.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen1_tp8_batch1_eplb0_mtp0_1.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [32]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen4_tp8_batch32_eplb0_mtp0_32.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen4_tp8_batch32_eplb0_mtp0_32.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [128]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen4_tp8_batch32_eplb0_mtp0_128.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen4_tp8_batch32_eplb0_mtp0_128.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [96]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen6_tp8_batch16_eplb0_mtp0_96.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen6_tp8_batch16_eplb0_mtp0_96.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 1
        dp-attn: false
    # Non-MTP (STP) configurations - High throughput (DP attention)
    - conc-list: [128]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen1_dep8_batch128_eplb0_mtp0_128.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen1_dep8_batch128_eplb0_mtp0_128.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [128]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen2_dep8_batch64_eplb0_mtp0_128.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen2_dep8_batch64_eplb0_mtp0_128.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen1_dep8_batch256_eplb0_mtp0_256.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/stp/ctx1_gen1_dep8_batch256_eplb0_mtp0_256.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [640]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b200-fp8/8k1k/stp/ctx2_gen1_dep8_batch640_eplb0_mtp0_640.yaml
        - "CONFIG_FILE=recipes/trtllm/b200-fp8/8k1k/stp/ctx2_gen1_dep8_batch640_eplb0_mtp0_640.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true


dsr1-fp4-b300-dynamo-trt:
  image: nvcr.io/nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post1
  model: deepseek-r1-fp4
  model-prefix: dsr1
  runner: b300
  precision: fp4
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [654]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/mtp/ctx1_gen1_dep8_batch64_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/mtp/ctx1_gen1_dep8_batch64_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [271]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/mtp/ctx1_gen2_dep8_batch16_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/mtp/ctx1_gen2_dep8_batch16_eplb0_mtp3.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [11]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/mtp/ctx1_gen5_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/mtp/ctx1_gen5_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [10, 20, 25, 60, 120, 200]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/mtp/ctx1_gen5_tep8_batch32_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/mtp/ctx1_gen5_tep8_batch32_eplb0_mtp3.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [2342]
      prefill:
        num-worker: 2
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/mtp/ctx2_gen1_dep8_batch256_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/mtp/ctx2_gen1_dep8_batch256_eplb0_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [8609]
      prefill:
        num-worker: 5
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/mtp/ctx5_gen2_dep8_batch512_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/mtp/ctx5_gen2_dep8_batch512_eplb0_mtp1.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [12926]
      prefill:
        num-worker: 5
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/mtp/ctx5_gen2_dep8_batch768_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/mtp/ctx5_gen2_dep8_batch768_eplb0_mtp1.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true

    # Non-MTP configurations
    - conc-list: [1176]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/stp/ctx1_gen2_dep8_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/stp/ctx1_gen2_dep8_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [6]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [5, 10, 15, 25]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/stp/ctx1_gen5_tep4_batch4_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/stp/ctx1_gen5_tep4_batch4_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 4
        ep: 4
        dp-attn: false
    - conc-list: [60, 110, 195, 395]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/stp/ctx1_gen5_tep8_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/stp/ctx1_gen5_tep8_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [4405]
      prefill:
        num-worker: 2
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/stp/ctx2_gen1_dep8_batch512_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/stp/ctx2_gen1_dep8_batch512_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [8192]
      prefill:
        num-worker: 3
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/stp/ctx3_gen1_dep8_batch1024_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/stp/ctx3_gen1_dep8_batch1024_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [4611]
      prefill:
        num-worker: 3
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/1k1k/stp/ctx3_gen2_dep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/1k1k/stp/ctx3_gen2_dep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true

  - isl: 8192
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [2198]
      prefill:
        num-worker: 10
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/mtp/ctx10_gen1_dep8_batch256_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/mtp/ctx10_gen1_dep8_batch256_eplb0_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [52]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/mtp/ctx1_gen4_tep4_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/mtp/ctx1_gen4_tep4_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [32]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [181]
      prefill:
        num-worker: 3
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/mtp/ctx3_gen1_dep8_batch16_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/mtp/ctx3_gen1_dep8_batch16_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1197]
      prefill:
        num-worker: 9
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/mtp/ctx9_gen1_dep8_batch128_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/mtp/ctx9_gen1_dep8_batch128_eplb0_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

    # Non-MTP configurations
    - conc-list: [105]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/stp/ctx1_gen3_tep4_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/stp/ctx1_gen3_tep4_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: false
    - conc-list: [63]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/stp/ctx1_gen3_tep8_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/stp/ctx1_gen3_tep8_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/stp/ctx1_gen3_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/stp/ctx1_gen3_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [12]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/stp/ctx1_gen4_tep4_batch2_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/stp/ctx1_gen4_tep4_batch2_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: false
    - conc-list: [589]
      prefill:
        num-worker: 5
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/stp/ctx5_gen2_dep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/stp/ctx5_gen2_dep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [1093]
      prefill:
        num-worker: 6
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/stp/ctx6_gen1_dep8_batch128_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/stp/ctx6_gen1_dep8_batch128_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [2048]
      prefill:
        num-worker: 8
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp4/8k1k/stp/ctx8_gen1_dep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp4/8k1k/stp/ctx8_gen1_dep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

dsr1-fp8-b300-dynamo-trt:
  image: nvcr.io/nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post1
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: b300
  precision: fp8
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  # 1k1k MTP configs
  - isl: 1024
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [10]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen8_tp8_batch1_eplb0_mtp3_10.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen8_tp8_batch1_eplb0_mtp3_10.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [160]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen8_tp8_batch16_eplb0_mtp3_160.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen8_tp8_batch16_eplb0_mtp3_160.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [3072]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen1_dp8_batch256_eplb0_mtp1_3072.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen1_dp8_batch256_eplb0_mtp1_3072.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [2560]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen2_dep8_batch128_eplb0_mtp1_2560.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen2_dep8_batch128_eplb0_mtp1_2560.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [720]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen5_dep8_batch16_eplb0_mtp2_720.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/mtp/ctx1_gen5_dep8_batch16_eplb0_mtp2_720.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [11264]
      prefill:
        num-worker: 3
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/mtp/ctx3_gen2_dp8_batch512_eplb0_mtp1_11264.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/mtp/ctx3_gen2_dp8_batch512_eplb0_mtp1_11264.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 1
        dp-attn: true
  # 1k1k STP configs
  - isl: 1024
    osl: 1024
    search-space:
    - conc-list: [2112]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen1_dep8_batch256_eplb0_mtp0_2112.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen1_dep8_batch256_eplb0_mtp0_2112.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [3072]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen2_dp8_batch128_eplb0_mtp0_3072.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen2_dp8_batch128_eplb0_mtp0_3072.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 1
        dp-attn: true
    - conc-list: [1280]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen3_dp8_batch48_eplb0_mtp0_1280.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen3_dp8_batch48_eplb0_mtp0_1280.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 1
        dp-attn: true
    - conc-list: [12]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen8_tp8_batch64_eplb0_mtp0_12.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen8_tp8_batch64_eplb0_mtp0_12.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [128]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen8_tp8_batch64_eplb0_mtp0_128.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen8_tp8_batch64_eplb0_mtp0_128.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [384]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen8_tp8_batch64_eplb0_mtp0_384.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/stp/ctx1_gen8_tp8_batch64_eplb0_mtp0_384.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [16384]
      prefill:
        num-worker: 2
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/1k1k/stp/ctx2_gen1_dp8_batch1024_eplb0_mtp0_16384.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/1k1k/stp/ctx2_gen1_dp8_batch1024_eplb0_mtp0_16384.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: true
  # 8k1k MTP configs
  - isl: 8192
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [40]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/mtp/ctx1_gen2_tp8_batch16_eplb0_mtp3_40.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/mtp/ctx1_gen2_tp8_batch16_eplb0_mtp3_40.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/mtp/ctx1_gen4_tp8_batch1_eplb0_mtp3_8.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/mtp/ctx1_gen4_tp8_batch1_eplb0_mtp3_8.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [20]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/mtp/ctx1_gen4_tp8_batch4_eplb0_mtp3_20.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/mtp/ctx1_gen4_tp8_batch4_eplb0_mtp3_20.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 1
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [72]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/mtp/ctx1_gen1_dp8_batch8_eplb0_mtp3_72.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/mtp/ctx1_gen1_dp8_batch8_eplb0_mtp3_72.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [144]
      prefill:
        num-worker: 2
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/mtp/ctx2_gen1_dp8_batch16_eplb0_mtp3_144.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/mtp/ctx2_gen1_dp8_batch16_eplb0_mtp3_144.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [512]
      prefill:
        num-worker: 4
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/mtp/ctx4_gen1_dp8_batch64_eplb0_mtp2_512.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/mtp/ctx4_gen1_dp8_batch64_eplb0_mtp2_512.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: true
  # 8k1k STP configs
  - isl: 8192
    osl: 1024
    search-space:
    - conc-list: [64]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/stp/ctx1_gen4_tp8_batch16_eplb0_mtp0_64.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/stp/ctx1_gen4_tp8_batch16_eplb0_mtp0_64.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [16]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/stp/ctx1_gen8_tp8_batch2_eplb0_mtp0_16.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/stp/ctx1_gen8_tp8_batch2_eplb0_mtp0_16.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [256]
      prefill:
        num-worker: 2
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/stp/ctx2_gen1_dp8_batch32_eplb0_mtp0_256.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/stp/ctx2_gen1_dp8_batch32_eplb0_mtp0_256.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: true
    - conc-list: [512]
      prefill:
        num-worker: 3
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/stp/ctx3_gen1_dp8_batch64_eplb0_mtp0_512.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/stp/ctx3_gen1_dp8_batch64_eplb0_mtp0_512.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: true
    - conc-list: [256]
      prefill:
        num-worker: 3
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/stp/ctx3_gen5_tp8_batch64_eplb0_mtp0_256.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/stp/ctx3_gen5_tp8_batch64_eplb0_mtp0_256.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [1075]
      prefill:
        num-worker: 5
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/stp/ctx5_gen1_dp8_batch128_eplb0_mtp0_1075.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/stp/ctx5_gen1_dp8_batch128_eplb0_mtp0_1075.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: true
    - conc-list: [3072]
      prefill:
        num-worker: 7
        tp: 4
        ep: 1
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/b300-fp8/8k1k/stp/ctx7_gen1_dep8_batch384_eplb0_mtp0_3072.yaml
        - "CONFIG_FILE=recipes/trtllm/b300-fp8/8k1k/stp/ctx7_gen1_dep8_batch384_eplb0_mtp0_3072.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

dsr1-fp4-b200-sglang:
  image: lmsysorg/sglang:v0.5.6-cu129-amd64
  model: nvidia/DeepSeek-R1-0528-FP4-V2
  model-prefix: dsr1
  runner: b200
  precision: fp4
  framework: sglang
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 4, ep: 4, conc-start: 4, conc-end: 128 }
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 128 }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 4, ep: 4, conc-start: 4, conc-end: 128 }
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 128 }
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 4, ep: 4, conc-start: 4, conc-end: 128 }
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 16 }

dsr1-fp4-b200-trt:
  image: nvcr.io#nvidia/tensorrt-llm/release:1.2.0rc6.post2
  model: nvidia/DeepSeek-R1-0528-FP4-V2
  model-prefix: dsr1
  runner: b200-trt
  precision: fp4
  framework: trt
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # low concurrency cases use TP only
    # concurrency 64 uses TP & EP
    # high concurrency cases use TP & EP & DP-ATTN
    - { tp: 4, conc-start: 4, conc-end: 16 }
    - { tp: 4, ep: 4, dp-attn: true, conc-start: 256, conc-end: 256 }
    - { tp: 8, conc-start: 4, conc-end: 4 }
    - { tp: 8, ep: 8, conc-start: 64, conc-end: 64 }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 128, conc-end: 256 }
  - isl: 1024
    osl: 8192
    search-space:
    # low concurrency cases use TP only
    # concurrency 64 uses TP & EP
    # high concurrency cases use TP & EP & DP-ATTN
    - { tp: 4, conc-start: 4, conc-end: 16 }
    - { tp: 4, ep: 4, dp-attn: true, conc-start: 256, conc-end: 256 }
    - { tp: 8, conc-start: 4, conc-end: 4 }
    - { tp: 8, ep: 8, conc-start: 64, conc-end: 64 }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 128, conc-end: 256 }
  - isl: 8192
    osl: 1024
    search-space:
    # low concurrency cases use TP only
    # concurrency 32 uses TP & EP
    # high concurrency cases use TP & EP & DP-ATTN
    - { tp: 4, conc-start: 4, conc-end: 32 }
    - { tp: 4, ep: 4, conc-start: 32, conc-end: 32 }
    - { tp: 4, ep: 4, dp-attn: true, conc-start: 256, conc-end: 256 }
    - { tp: 8, conc-start: 4, conc-end: 4 }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 128, conc-end: 256 }

dsr1-fp4-b200-trt-mtp:
  image: nvcr.io#nvidia/tensorrt-llm/release:1.2.0rc6.post3
  model: nvidia/DeepSeek-R1-0528-FP4-V2
  model-prefix: dsr1
  runner: b200-trt
  precision: fp4
  framework: trt
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # TP=4 configurations
    - { tp: 4, conc-start: 4, conc-end: 8, spec-decoding: mtp }
    - { tp: 4, ep: 4, dp-attn: true, conc-start: 256, conc-end: 256, spec-decoding: mtp }
    # TP=8 configurations
    - { tp: 8, conc-start: 4, conc-end: 4, spec-decoding: mtp }
    - { tp: 8, conc-start: 128, conc-end: 128, spec-decoding: mtp }
    - { tp: 8, ep: 8, conc-start: 32, conc-end: 128, spec-decoding: mtp }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 32, conc-end: 64, spec-decoding: mtp }
  - isl: 1024
    osl: 8192
    search-space:
      # TP=4 configurations
    - { tp: 4, conc-start: 16, conc-end: 16, spec-decoding: mtp }
    - { tp: 4, ep: 4, conc-start: 8, conc-end: 8, spec-decoding: mtp }
    - { tp: 4, ep: 4, dp-attn: true, conc-start: 256, conc-end: 256, spec-decoding: mtp }
      # TP=8 configurations
    - { tp: 8, conc-start: 4, conc-end: 8, spec-decoding: mtp }
    - { tp: 8, ep: 8, conc-start: 32, conc-end: 64, spec-decoding: mtp }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 128, conc-end: 256, spec-decoding: mtp }
  - isl: 8192
    osl: 1024
    search-space:
      # TP=4 configurations
    - { tp: 4, conc-start: 4, conc-end: 16, spec-decoding: mtp }
    - { tp: 4, ep: 4, conc-start: 32, conc-end: 32, spec-decoding: mtp }
    - { tp: 4, ep: 4, dp-attn: true, conc-start: 256, conc-end: 256, spec-decoding: mtp }
      # TP=8 configurations
    - { tp: 8, conc-start: 4, conc-end: 4, spec-decoding: mtp }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 64, conc-end: 256, spec-decoding: mtp }

dsr1-fp8-b200-sglang:
  image: lmsysorg/sglang:v0.5.6-cu129-amd64
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: b200
  precision: fp8
  framework: sglang
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 64 }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 64 }
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 4 }
    - { tp: 4, ep: 1, conc-start: 4, conc-end: 32 }

dsr1-fp8-b200-sglang-mtp:
  image: lmsysorg/sglang:v0.5.8-cu130-amd64
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: b200
  precision: fp8
  framework: sglang
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 512, spec-decoding: mtp }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 512, spec-decoding: mtp }
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 512, spec-decoding: mtp }

dsr1-fp8-b200-trt:
  image: nvcr.io#nvidia/tensorrt-llm/release:1.2.0rc6.post2
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: b200-trt
  precision: fp8
  framework: trt
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 8, ep: 1, conc-start: 64, conc-end: 128 }
    - { tp: 4, ep: 1, conc-start: 8, conc-end: 16 } 
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 8 }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 256, conc-end: 256}
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 128 }    
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 8, ep: 1, conc-start: 64, conc-end: 256 }
    - { tp: 4, ep: 1, conc-start: 8, conc-end: 32 }
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 8 }

dsr1-fp8-b200-trt-mtp:
  image: nvcr.io#nvidia/tensorrt-llm/release:1.2.0rc6.post3
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: b200-trt
  precision: fp8
  framework: trt
  multinode: false
  seq-len-configs:
  # For all sequence lengths, MTP=3 (or MTP=1 when DP_ATTN=true)
  - isl: 1024
    osl: 1024
    search-space:
    # mostly TP8
    # If CONC == 256, then TP8, EP8, DP_ATTN=true
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 128, spec-decoding: mtp }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 256, conc-end: 256, spec-decoding: mtp }
  - isl: 1024
    osl: 8192
    search-space:
    # mostly TP8
    # If CONC >= 128, then TP8, EP8, DP_ATTN=true
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 64, spec-decoding: mtp }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 128, conc-end: 256, spec-decoding: mtp }
  - isl: 8192
    osl: 1024
    search-space:
    # TP8 for all points
    - { tp: 8, ep: 1, conc-start: 4, conc-end: 256, spec-decoding: mtp }

dsr1-fp8-h200-sglang:
  image: lmsysorg/sglang:v0.5.7-cu129-amd64
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: h200
  precision: fp8
  framework: sglang
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 8, conc-start: 4, conc-end: 64 }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 8, conc-start: 4, conc-end: 64 }
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 8, conc-start: 4, conc-end: 64 }

dsr1-fp8-h200-trt:
  image: nvcr.io#nvidia/tensorrt-llm/release:1.1.0rc2.post2
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: h200
  precision: fp8
  framework: trt
  multinode: false
  # For all sequence lengths, EP=TP
  seq-len-configs:
  - isl: 1024
    osl: 1024
    # If CONC > 64, then DP_ATTN=true
    search-space:
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 64 }
  - isl: 1024
    osl: 8192
    # If CONC > 64, then DP_ATTN=true
    search-space:
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 64 }
  - isl: 8192
    osl: 1024
    # If CONC > 32, then DP_ATTN=true
    search-space:
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 32 }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 64, conc-end: 64 }

dsr1-fp8-h200-trt-mtp:
  image: nvcr.io#nvidia/tensorrt-llm/release:1.1.0rc2.post2
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: h200
  precision: fp8
  framework: trt
  multinode: false
  # For all sequence lengths, EP=TP, MOE_BACKEND=CUTLASS, MTP=3 (or MTP=1 when DP_ATTN=true)
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # If CONC >= 128, then DP_ATTN=true, MTP=1
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 64, spec-decoding: mtp }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 128, conc-end: 256, spec-decoding: mtp }
  - isl: 1024
    osl: 8192
    search-space:
    # If CONC >= 256, then DP_ATTN=true, MTP=1
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 128, spec-decoding: mtp }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 256, conc-end: 256, spec-decoding: mtp }
  - isl: 8192
    osl: 1024
    search-space:
    # If CONC >= 64, then DP_ATTN=true, MTP=1
    - { tp: 8, ep: 8, conc-start: 4, conc-end: 32, spec-decoding: mtp }
    - { tp: 8, ep: 8, dp-attn: true, conc-start: 64, conc-end: 256, spec-decoding: mtp }

dsr1-fp8-h200-dynamo-trt:
  image: nvcr.io/nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post1
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: h200-multinode-slurm
  precision: fp8
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # MTP configurations
    - spec-decoding: "mtp"
      conc-list: [1]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c1_ctx1_gen11_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c1_ctx1_gen11_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 11
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [4]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c4_ctx1_gen11_tep8_batch128_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c4_ctx1_gen11_tep8_batch128_eplb0_mtp3.yaml"
      decode:
        num-worker: 11
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c8_ctx1_gen11_tep8_batch128_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c8_ctx1_gen11_tep8_batch128_eplb0_mtp3.yaml"
      decode:
        num-worker: 11
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [16]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c16_ctx1_gen9_tep8_batch128_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c16_ctx1_gen9_tep8_batch128_eplb0_mtp3.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [32]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c32_ctx1_gen11_tep8_batch128_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c32_ctx1_gen11_tep8_batch128_eplb0_mtp3.yaml"
      decode:
        num-worker: 11
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [64]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c64_ctx1_gen8_dep8_batch128_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c64_ctx1_gen8_dep8_batch128_eplb0_mtp3.yaml"
      decode:
        num-worker: 8
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [128]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c128_ctx1_gen7_dep8_batch128_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c128_ctx1_gen7_dep8_batch128_eplb0_mtp3.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c256_ctx1_gen4_dep8_batch128_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c256_ctx1_gen4_dep8_batch128_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [512]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/mtp/c512_ctx1_gen2_dep8_batch256_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/mtp/c512_ctx1_gen2_dep8_batch256_eplb0_mtp1.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    # Non-MTP configurations (STP)
    - conc-list: [1]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c1_ctx1_gen9_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c1_ctx1_gen9_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c4_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c4_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c8_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c8_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [16]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c16_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c16_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [32]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c32_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c32_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [64]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c64_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c64_ctx1_gen9_tep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [128]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c128_ctx1_gen9_dep8_batch512_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c128_ctx1_gen9_dep8_batch512_eplb0_mtp0.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c256_ctx1_gen6_dep8_batch512_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c256_ctx1_gen6_dep8_batch512_eplb0_mtp0.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [512]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/1k1k/stp/c512_ctx2_gen7_dep8_batch512_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/1k1k/stp/c512_ctx2_gen7_dep8_batch512_eplb0_mtp0.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # MTP configurations
    - spec-decoding: "mtp"
      conc-list: [1]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c1_ctx1_gen7_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c1_ctx1_gen7_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [4]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c4_ctx1_gen7_tep8_batch32_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c4_ctx1_gen7_tep8_batch32_eplb0_mtp3.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c8_ctx1_gen6_tep8_batch32_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c8_ctx1_gen6_tep8_batch32_eplb0_mtp3.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [16]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c16_ctx1_gen3_tep8_batch32_eplb0_mtp2.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c16_ctx1_gen3_tep8_batch32_eplb0_mtp2.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [32]
      prefill:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c32_ctx3_gen5_tep8_batch32_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c32_ctx3_gen5_tep8_batch32_eplb0_mtp3.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [64]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c64_ctx1_gen1_dep8_batch32_eplb0_mtp2.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c64_ctx1_gen1_dep8_batch32_eplb0_mtp2.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [128]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c128_ctx2_gen1_dep8_batch32_eplb0_mtp2.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c128_ctx2_gen1_dep8_batch32_eplb0_mtp2.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [256]
      prefill:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c256_ctx3_gen1_dep8_batch32_eplb0_mtp2.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c256_ctx3_gen1_dep8_batch32_eplb0_mtp2.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [512]
      prefill:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/mtp/c512_ctx3_gen1_dep8_batch64_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/mtp/c512_ctx3_gen1_dep8_batch64_eplb0_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    # Non-MTP configurations (STP)
    - conc-list: [1]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c1_ctx1_gen7_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c1_ctx1_gen7_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c4_ctx1_gen7_tep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c4_ctx1_gen7_tep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c8_ctx1_gen6_tep8_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c8_ctx1_gen6_tep8_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [16]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c16_ctx1_gen3_tep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c16_ctx1_gen3_tep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [32]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c32_ctx2_gen5_tep8_batch128_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c32_ctx2_gen5_tep8_batch128_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [64]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c64_ctx2_gen3_dep8_batch128_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c64_ctx2_gen3_dep8_batch128_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [128]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c128_ctx1_gen1_dep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c128_ctx1_gen1_dep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [256]
      prefill:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c256_ctx5_gen3_dep8_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c256_ctx5_gen3_dep8_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [512]
      prefill:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h200/8k1k/stp/c512_ctx3_gen1_dep8_batch512_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h200/8k1k/stp/c512_ctx3_gen1_dep8_batch512_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

dsr1-fp8-h100-dynamo-trt:
  image: nvcr.io/nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post3
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: h100-multinode-slurm
  precision: fp8
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # MTP configurations
    - spec-decoding: "mtp"
      conc-list: [6]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [9]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch2_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch2_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [30]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [60]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch16_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch16_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [117]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch32_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch32_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [231]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_dep16_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_dep16_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [462]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch128_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen3_tep16_batch128_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [615]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen1_dep16_batch32_eplb0_mtp2.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen1_dep16_batch32_eplb0_mtp2.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1229]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen1_dep16_batch64_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/mtp/ctx1_gen1_dep16_batch64_eplb0_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    # Non-MTP configurations (STP)
    - conc-list: [6]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_tep16_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_tep16_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - conc-list: [9]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_tep16_batch2_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_tep16_batch2_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - conc-list: [30]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_tep16_batch8_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_tep16_batch8_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - conc-list: [60]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_tep16_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_tep16_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - conc-list: [231]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_dep16_batch4_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_dep16_batch4_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [462]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_dep16_batch8_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_dep16_batch8_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [924]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_dep16_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_dep16_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [1845]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_dep16_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx1_gen3_dep16_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [4916]
      prefill:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/1k1k/stp/ctx2_gen1_dep16_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/1k1k/stp/ctx2_gen1_dep16_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # MTP configurations (6 points)
    - spec-decoding: "mtp"
      conc-list: [6]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen3_tep16_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen3_tep16_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [9]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen3_tep16_batch2_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen3_tep16_batch2_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [30]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen3_tep16_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen3_tep16_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [77]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen1_dep16_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen1_dep16_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    # commenting out cuz it persistently causes problems
    # https://github.com/InferenceMAX/InferenceMAX/actions/runs/21769314582/job/62813105509
    # - spec-decoding: "mtp"
    #   conc-list: [78]
    #   prefill:
    #     num-worker: 1
    #     tp: 16
    #     ep: 16
    #     dp-attn: true
    #     additional-settings:
    #     # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen2_tep16_batch32_eplb0_mtp3.yaml
    #     - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/mtp/ctx1_gen2_tep16_batch32_eplb0_mtp3.yaml"
    #   decode:
    #     num-worker: 2
    #     tp: 16
    #     ep: 16
    #     dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [154]
      prefill:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/mtp/ctx2_gen1_dep16_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/mtp/ctx2_gen1_dep16_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    # STP configurations (5 points)
    - conc-list: [6]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/stp/ctx1_gen3_tep16_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/stp/ctx1_gen3_tep16_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - conc-list: [9]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/stp/ctx1_gen3_tep16_batch2_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/stp/ctx1_gen3_tep16_batch2_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - conc-list: [30]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/stp/ctx1_gen3_tep16_batch8_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/stp/ctx1_gen3_tep16_batch8_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: false
    - conc-list: [154]
      prefill:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/stp/ctx1_gen2_tep16_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/stp/ctx1_gen2_tep16_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: false
    - conc-list: [308]
      prefill:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/h100-fp8/8k1k/stp/ctx2_gen1_dep16_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/h100-fp8/8k1k/stp/ctx2_gen1_dep16_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true

gptoss-fp4-b200-trt:
  image: nvcr.io#nvidia/tensorrt-llm/release:1.2.0rc2.post2
  model: openai/gpt-oss-120b
  model-prefix: gptoss
  runner: b200-trt
  precision: fp4
  framework: trt
  multinode: false
  seq-len-configs:
  # Low ==> high TP from Left to Right of pareto
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 1, conc-start: 256, conc-end: 256 }
    - { tp: 2, ep: 2, dp-attn: true, conc-start: 256, conc-end: 256 }
    - { tp: 2, conc-start:  4, conc-end: 256 }
    - { tp: 4, ep: 4, dp-attn: true, conc-start: 64, conc-end: 64 }
    - { tp: 4, conc-start: 4, conc-end: 4 }
    - { tp: 8, conc-start: 4, conc-end: 4 }
  # Low ==> high TP from Left to Right of pareto
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 1, conc-start: 256, conc-end: 256}
    - { tp: 2, conc-start: 128, conc-end: 256}
    - { tp: 4, conc-start:   4, conc-end: 256}
    - { tp: 8, conc-start:   4, conc-end:   4}
  # Low ==> high TP from Left to Right of pareto
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 1, conc-start:   4, conc-end: 256}
    - { tp: 2, conc-start:   4, conc-end: 256}
    - { tp: 4, conc-start:   4, conc-end:  32}
    - { tp: 8, conc-start:   4, conc-end:   4}

gptoss-fp4-b200-vllm:
  image: vllm/vllm-openai:v0.13.0
  model: openai/gpt-oss-120b
  model-prefix: gptoss
  runner: b200
  precision: fp4
  framework: vllm
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 1, conc-start: 4, conc-end: 128 }
    - { tp: 2, conc-start: 4, conc-end: 128 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 8 }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 1, conc-start: 4, conc-end: 128 }
    - { tp: 2, conc-start: 4, conc-end: 128 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 8 }
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 1, conc-start: 4, conc-end: 128 }
    - { tp: 2, conc-start: 4, conc-end: 128 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 4 }

gptoss-fp4-h100-vllm:
  image: vllm/vllm-openai:v0.13.0
  model: openai/gpt-oss-120b
  model-prefix: gptoss
  runner: h100
  precision: fp4
  framework: vllm
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 2, conc-start: 4, conc-end: 64 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 64 }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 2, conc-start: 4, conc-end: 64 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 64 }
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 2, conc-start: 4, conc-end: 64 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 16 }

dsr1-fp8-h100-dynamo-sglang:
  image: lmsysorg/sglang:v0.5.8-cu130
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: h100-multinode-slurm
  precision: fp8
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # # STP: Max throughput TEP (1 prefill, 2 decode)
    # - conc-list: [1, 2, 4, 8, 16, 32, 64, 128]
    #   prefill:
    #     num-worker: 1
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    #     additional-settings:
    #     - "CONFIG_FILE=recipes/h100/1k1k/stp/h100-fp8-1p2d-max-tp.yaml"
    #   decode:
    #     num-worker: 2
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    # # STP: Max throughput DEP (1 prefill, 1 decode, dp-attention)
    # - conc-list: [1, 2, 4, 8, 16, 32, 64]
    #   prefill:
    #     num-worker: 1
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    #     additional-settings:
    #     - "CONFIG_FILE=recipes/h100/1k1k/stp/h100-fp8-1p1d-max-dep.yaml"
    #   decode:
    #     num-worker: 1
    #     tp: 16
    #     ep: 16
    #     dp-attn: true
    # MTP: Max throughput TEP (1 prefill, 2 decode)
    - spec-decoding: "mtp"
      conc-list: [1, 2, 4, 8, 16, 32, 64, 128]
      prefill:
        num-worker: 1
        tp: 16
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h100/1k1k/mtp/h100-fp8-1p2d-max-tp-mtp.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 1
        dp-attn: false
    # MTP: Max throughput DEP (1 prefill, 1 decode, dp-attention)
    - spec-decoding: "mtp"
      conc-list: [1, 2, 4, 8, 16, 32, 64]
      prefill:
        num-worker: 1
        tp: 16
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h100/1k1k/mtp/h100-fp8-1p1d-max-dep-mtp.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
  - isl: 1024
    osl: 8192
    search-space:
    # # STP: Max throughput TEP (1 prefill, 2 decode)
    # - conc-list: [1, 2, 4, 8, 16, 32]
    #   prefill:
    #     num-worker: 1
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    #     additional-settings:
    #     - "CONFIG_FILE=recipes/h100/1k8k/stp/h100-fp8-1p2d-max-tp.yaml"
    #   decode:
    #     num-worker: 2
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    # # STP: Max throughput DEP (1 prefill, 1 decode, dp-attention)
    # - conc-list: [1, 2, 4, 8]
    #   prefill:
    #     num-worker: 1
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    #     additional-settings:
    #     - "CONFIG_FILE=recipes/h100/1k8k/stp/h100-fp8-1p1d-max-dep.yaml"
    #   decode:
    #     num-worker: 1
    #     tp: 16
    #     ep: 16
    #     dp-attn: true
    # MTP: Max throughput TEP (1 prefill, 2 decode)
    - spec-decoding: "mtp"
      conc-list: [1, 2, 4, 8, 16, 32, 64]
      prefill:
        num-worker: 1
        tp: 16
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h100/1k8k/mtp/h100-fp8-1p2d-max-tp-mtp.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 1
        dp-attn: false
    # MTP: Max throughput DEP (1 prefill, 1 decode, dp-attention)
    - spec-decoding: "mtp"
      conc-list: [1, 2, 4, 8, 16, 32, 64]
      prefill:
        num-worker: 1
        tp: 16
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h100/1k8k/mtp/h100-fp8-1p1d-max-dep-mtp.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # # STP: Max throughput TEP (1 prefill, 1 decode)
    # - conc-list: [1, 2, 4, 8, 16, 32, 64, 128]
    #   prefill:
    #     num-worker: 1
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    #     additional-settings:
    #     - "CONFIG_FILE=recipes/h100/8k1k/stp/h100-fp8-1p1d-max-tp.yaml"
    #   decode:
    #     num-worker: 1
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    # # STP: Max throughput DEP (1 prefill, 1 decode, dp-attention)
    # - conc-list: [1, 2, 4, 8, 16, 32, 64]
    #   prefill:
    #     num-worker: 1
    #     tp: 16
    #     ep: 1
    #     dp-attn: false
    #     additional-settings:
    #     - "CONFIG_FILE=recipes/h100/8k1k/stp/h100-fp8-1p1d-max-dep.yaml"
    #   decode:
    #     num-worker: 1
    #     tp: 16
    #     ep: 16
    #     dp-attn: true
    # MTP: Max throughput TEP (1 prefill, 1 decode)
    - spec-decoding: "mtp"
      conc-list: [1, 2, 4, 8, 16, 32, 64, 128]
      prefill:
        num-worker: 1
        tp: 16
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h100/8k1k/mtp/h100-fp8-1p1d-max-tp-mtp.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 1
        dp-attn: false
    # MTP: Max throughput DEP (1 prefill, 1 decode, dp-attention)
    - spec-decoding: "mtp"
      conc-list: [1, 2, 4, 8, 16, 32, 64]
      prefill:
        num-worker: 1
        tp: 16
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h100/8k1k/mtp/h100-fp8-1p1d-max-dep-mtp.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true

gptoss-fp4-h200-trt:
  image: nvcr.io#nvidia/tensorrt-llm/release:gpt-oss-dev
  model: openai/gpt-oss-120b
  model-prefix: gptoss
  runner: h200
  precision: fp4
  framework: trt
  multinode: false
  # For all sequence lengths, EP=TP, DP_ATTENTION=false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 1, ep: 1, dp-attn: false, conc-start: 4, conc-end: 64 }
    - { tp: 2, ep: 2, dp-attn: false, conc-start: 4, conc-end: 64 }
    - { tp: 4, ep: 4, dp-attn: false, conc-start: 4, conc-end: 32 }
    - { tp: 8, ep: 8, dp-attn: false, conc-start: 4, conc-end: 8 }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 1, ep: 1, dp-attn: false, conc-start: 4, conc-end: 64 }
    - { tp: 2, ep: 2, dp-attn: false, conc-start: 4, conc-end: 64 }
    - { tp: 4, ep: 4, dp-attn: false, conc-start: 4, conc-end: 64 }
    - { tp: 8, ep: 8, dp-attn: false, conc-start: 4, conc-end: 8 }
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 1, ep: 1, dp-attn: false, conc-start: 4, conc-end: 64 }
    - { tp: 2, ep: 2, dp-attn: false, conc-start: 4, conc-end: 64 }
    - { tp: 4, ep: 4, dp-attn: false, conc-start: 4, conc-end: 64 }
    - { tp: 8, ep: 8, dp-attn: false, conc-start: 4, conc-end: 8 }

gptoss-fp4-h200-vllm:
  image: vllm/vllm-openai:v0.13.0
  model: openai/gpt-oss-120b
  model-prefix: gptoss
  runner: h200
  precision: fp4
  framework: vllm
  multinode: false
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - { tp: 1, conc-start: 4, conc-end: 4 }
    - { tp: 2, conc-start: 4, conc-end: 64 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 64 }
  - isl: 1024
    osl: 8192
    search-space:
    - { tp: 1, conc-start: 4, conc-end: 4 }
    - { tp: 2, conc-start: 4, conc-end: 64 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 64 }
  - isl: 8192
    osl: 1024
    search-space:
    - { tp: 1, conc-start: 4, conc-end: 64 }
    - { tp: 2, conc-start: 4, conc-end: 64 }
    - { tp: 4, conc-start: 4, conc-end: 64 }
    - { tp: 8, conc-start: 4, conc-end: 32 }

dsr1-fp4-gb200-dynamo-trt:
  image: nvcr.io/nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post2
  model: nvidia/DeepSeek-R1-0528-NVFP4-v2
  model-prefix: dsr1
  runner: gb200
  precision: fp4
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # MTP configurations (spec_decoding="mtp")
    - spec-decoding: "mtp"
      conc-list: [ 180 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/mtp/ctx1_gen1_dep32_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/mtp/ctx1_gen1_dep32_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 4, 8, 12, 24, 48 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/mtp/ctx1_gen4_tep8_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/mtp/ctx1_gen4_tep8_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [ 4301 ]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/mtp/ctx2_gen1_dep16_batch256_eplb256_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/mtp/ctx2_gen1_dep16_batch256_eplb256_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 2253 ]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/mtp/ctx3_gen1_dep32_batch64_eplb288_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/mtp/ctx3_gen1_dep32_batch64_eplb288_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 16130 ]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/mtp/ctx3_gen5_dep4_batch768_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/mtp/ctx3_gen5_dep4_batch768_eplb0_mtp1.yaml"
      decode:
        num-worker: 5
        tp: 4
        ep: 4
        dp-attn: true


    # Non-MTP configurations (default spec_decoding="none")
    - conc-list: [ 4301 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen1_dep8_batch512_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen1_dep8_batch512_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [ 666 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen1_dep32_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen1_dep32_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [ 6144 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen2_dep4_batch768_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen2_dep4_batch768_eplb0_mtp0.yaml"
      decode:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
    - conc-list: [ 12, 24, 48, 96, 192 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen4_tep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen4_tep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [ 5 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [ 4301 ]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/stp/ctx2_gen1_dep16_batch256_eplb256_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/stp/ctx2_gen1_dep16_batch256_eplb256_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [ 2253 ]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k1k/stp/ctx2_gen1_dep32_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k1k/stp/ctx2_gen1_dep32_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

  - isl: 1024
    osl: 8192
    search-space:
    # MTP configurations (spec_decoding="mtp")
    - spec-decoding: "mtp"
      conc-list: [ 4, 8, 12, 24, 48 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen7_tep8_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen7_tep8_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [ 7 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen7_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen7_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [ 128 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen1_dep32_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen1_dep32_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 512 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 3072 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen3_dep16_batch64_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen3_dep16_batch64_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 6144 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen3_dep16_batch128_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen3_dep16_batch128_eplb0_mtp1.yaml"
      decode:
        num-worker: 3
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 8192 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen1_dep32_batch256_eplb288_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/mtp/ctx1_gen1_dep32_batch256_eplb288_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

    # Non-MTP configurations (default spec_decoding="none")
    - conc-list: [ 5 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen7_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen7_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [ 60 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen15_tep4_batch4_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen15_tep4_batch4_eplb0_mtp0.yaml"
      decode:
        num-worker: 15
        tp: 4
        ep: 4
        dp-attn: false
    - conc-list: [ 135 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen15_tep4_batch8_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen15_tep4_batch8_eplb0_mtp0.yaml"
      decode:
        num-worker: 15
        tp: 4
        ep: 4
        dp-attn: false
    - conc-list: [ 563 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen1_dep32_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen1_dep32_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [ 2048 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen1_dep32_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen1_dep32_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [ 4096 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen1_dep32_batch128_eplb288_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen1_dep32_batch128_eplb288_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [ 8192 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen1_dep32_batch256_eplb288_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/1k8k/stp/ctx1_gen1_dep32_batch256_eplb288_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

  - isl: 8192
    osl: 1024
    search-space:
    # MTP configurations (spec_decoding="mtp")
    - spec-decoding: "mtp"
      conc-list: [ 4, 8, 12, 24, 48 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/mtp/ctx1_gen4_tep8_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/mtp/ctx1_gen4_tep8_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [ 180 ]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/mtp/ctx3_gen1_dep32_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/mtp/ctx3_gen1_dep32_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 1229 ]
      prefill:
        num-worker: 7
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/mtp/ctx7_gen1_dep16_batch64_eplb256_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/mtp/ctx7_gen1_dep16_batch64_eplb256_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 666 ]
      prefill:
        num-worker: 8
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/mtp/ctx8_gen1_dep32_batch16_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/mtp/ctx8_gen1_dep32_batch16_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [ 4301 ]
      prefill:
        num-worker: 11
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/mtp/ctx11_gen1_dep16_batch256_eplb256_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/mtp/ctx11_gen1_dep16_batch256_eplb256_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true

    # Non-MTP configurations (default spec_decoding="none")
    - conc-list: [ 12, 44, 76 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/stp/ctx1_gen4_tep8_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/stp/ctx1_gen4_tep8_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [ 5 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [ 333 ]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/stp/ctx2_gen1_dep32_batch8_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/stp/ctx2_gen1_dep32_batch8_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [ 1229 ]
      prefill:
        num-worker: 7
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/stp/ctx7_gen1_dep32_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/stp/ctx7_gen1_dep32_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [ 2253 ]
      prefill:
        num-worker: 8
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/stp/ctx8_gen1_dep16_batch128_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/stp/ctx8_gen1_dep16_batch128_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [ 4096 ]
      prefill:
        num-worker: 10
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp4/8k1k/stp/ctx10_gen1_dep16_batch256_eplb256_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp4/8k1k/stp/ctx10_gen1_dep16_batch256_eplb256_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true


dsr1-fp8-gb200-dynamo-trt:
  image: nvcr.io#nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post2
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: gb200
  precision: fp8
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  # 1k1k MTP configs
  - isl: 1024
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [4301]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen1_dep8_batch512_eplb0_mtp1_4301.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen1_dep8_batch512_eplb0_mtp1_4301.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [2151]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen1_dep8_batch256_eplb0_mtp1_2151.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen1_dep8_batch256_eplb0_mtp1_2151.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1229]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen1_dep16_batch64_eplb0_mtp1_1229.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen1_dep16_batch64_eplb0_mtp1_1229.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [615]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3_615.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3_615.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [36]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen3_tep8_batch8_eplb0_mtp3_36.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen3_tep8_batch8_eplb0_mtp3_36.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [18]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen3_tep8_batch4_eplb0_mtp3_18.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen3_tep8_batch4_eplb0_mtp3_18.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [9]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen3_tep8_batch2_eplb0_mtp3_9.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/mtp/ctx1_gen3_tep8_batch2_eplb0_mtp3_9.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
  # 1k1k STP configs
    - conc-list: [6144]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep8_batch768_eplb0_mtp0_6144.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep8_batch768_eplb0_mtp0_6144.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [4301]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep8_batch512_eplb0_mtp0_4301.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep8_batch512_eplb0_mtp0_4301.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [2151]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep16_batch128_eplb0_mtp0_2151.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep16_batch128_eplb0_mtp0_2151.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [1127]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep32_batch32_eplb0_mtp0_1127.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep32_batch32_eplb0_mtp0_1127.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep32_batch8_eplb0_mtp0_256.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen1_dep32_batch8_eplb0_mtp0_256.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [27]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen3_tep8_batch8_eplb0_mtp0_27.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen3_tep8_batch8_eplb0_mtp0_27.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [3]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen3_tep8_batch1_eplb0_mtp0_3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k1k/stp/ctx1_gen3_tep8_batch1_eplb0_mtp0_3.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
  # 1k8k MTP configs
  - isl: 1024
    osl: 8192
    search-space:
    - spec-decoding: "mtp"
      conc-list: [8192]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen2_dep16_batch256_eplb0_mtp1_8192.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen2_dep16_batch256_eplb0_mtp1_8192.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [2152]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen2_dep16_batch64_eplb0_mtp1_2152.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen2_dep16_batch64_eplb0_mtp1_2152.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [564]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3_564.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3_564.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [72]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen1_dep32_batch2_eplb0_mtp3_72.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen1_dep32_batch2_eplb0_mtp3_72.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [4, 8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen4_tep8_batch2_eplb0_mtp3_8.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/mtp/ctx1_gen4_tep8_batch2_eplb0_mtp3_8.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    # 1k8k STP configs
    - conc-list: [8192]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen2_dep16_batch256_eplb0_mtp0_8192.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen2_dep16_batch256_eplb0_mtp0_8192.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [2048]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen1_dep32_batch64_eplb0_mtp0_2048.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen1_dep32_batch64_eplb0_mtp0_2048.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [564]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen1_dep32_batch16_eplb0_mtp0_564.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen1_dep32_batch16_eplb0_mtp0_564.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [36]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen4_tep8_batch8_eplb0_mtp0_36.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen4_tep8_batch8_eplb0_mtp0_36.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0_4.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/1k8k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0_4.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
  # 8k1k MTP configs
  - isl: 8192
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [666]
      prefill:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/mtp/ctx3_gen1_dep8_batch64_eplb0_mtp3_666.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/mtp/ctx3_gen1_dep8_batch64_eplb0_mtp3_666.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [666]
      prefill:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/mtp/ctx5_gen1_dep16_batch32_eplb0_mtp3_666.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/mtp/ctx5_gen1_dep16_batch32_eplb0_mtp3_666.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [333]
      prefill:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/mtp/ctx3_gen1_dep16_batch16_eplb0_mtp3_333.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/mtp/ctx3_gen1_dep16_batch16_eplb0_mtp3_333.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [333]
      prefill:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/mtp/ctx4_gen1_dep32_batch8_eplb0_mtp3_333.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/mtp/ctx4_gen1_dep32_batch8_eplb0_mtp3_333.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [90]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/mtp/ctx2_gen1_dep32_batch2_eplb0_mtp3_90.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/mtp/ctx2_gen1_dep32_batch2_eplb0_mtp3_90.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [15]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/mtp/ctx1_gen3_tep8_batch4_eplb0_mtp3_15.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/mtp/ctx1_gen3_tep8_batch4_eplb0_mtp3_15.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [6]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/mtp/ctx1_gen3_tep8_batch2_eplb0_mtp3_6.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/mtp/ctx1_gen3_tep8_batch2_eplb0_mtp3_6.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
  # 8k1k STP configs
    - conc-list: [1229]
      prefill:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/stp/ctx5_gen1_dep16_batch64_eplb0_mtp0_1229.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/stp/ctx5_gen1_dep16_batch64_eplb0_mtp0_1229.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [666]
      prefill:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/stp/ctx4_gen1_dep32_batch16_eplb0_mtp0_666.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/stp/ctx4_gen1_dep32_batch16_eplb0_mtp0_666.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [615]
      prefill:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/stp/ctx3_gen1_dep16_batch32_eplb0_mtp0_615.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/stp/ctx3_gen1_dep16_batch32_eplb0_mtp0_615.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [333]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/stp/ctx2_gen1_dep32_batch8_eplb0_mtp0_333.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/stp/ctx2_gen1_dep32_batch8_eplb0_mtp0_333.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [63]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/stp/ctx1_gen3_tep8_batch16_eplb0_mtp0_63.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/stp/ctx1_gen3_tep8_batch16_eplb0_mtp0_63.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [18]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/stp/ctx1_gen3_tep8_batch4_eplb0_mtp0_18.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/stp/ctx1_gen3_tep8_batch4_eplb0_mtp0_18.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [6]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb200-fp8/8k1k/stp/ctx1_gen3_tep8_batch1_eplb0_mtp0_6.yaml
        - "CONFIG_FILE=recipes/trtllm/gb200-fp8/8k1k/stp/ctx1_gen3_tep8_batch1_eplb0_mtp0_6.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false


dsr1-fp8-gb200-dynamo-sglang:
  image: lmsysorg/sglang:v0.5.8.post1-cu130
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: gb200
  precision: fp8
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
   # "Low latency" (1 prefill worker at TP4 and 1 decode worker at TP4)
    - conc-list: [4, 8]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb200-fp8/1k1k/low-latency.yaml
        - "CONFIG_FILE=recipes/gb200-fp8/1k1k/low-latency.yaml"
      decode:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false

    # "Mid curve" (3 prefill workers at DEP8 and 1 decode worker at DEP48)
    - conc-list: [1024, 2048, 4096]
      prefill:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb200-fp8/1k1k/mid-curve.yaml
        - "CONFIG_FILE=recipes/gb200-fp8/1k1k/mid-curve.yaml"
      decode:
        num-worker: 1
        tp: 48
        ep: 48
        dp-attn: true

    # "Max throughput" (2 prefill workers at DEP8 and 1 decode worker at DEP32)
    - conc-list: [1024, 2048, 4096, 6144]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb200-fp8/1k1k/max-tpt.yaml
        - "CONFIG_FILE=recipes/gb200-fp8/1k1k/max-tpt.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

    # "Ultra throughput" (1 prefill workers at DEP8 and 1 decode worker at DEP8)
    - conc-list: [4096]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb200-fp8/1k1k/ultra-tpt.yaml
        - "CONFIG_FILE=recipes/gb200-fp8/1k1k/ultra-tpt.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

  - isl: 8192
    osl: 1024
    search-space:
   # "Low latency" (1 prefill worker at TP8 and 1 decode worker at TP8)
    - conc-list: [4, 8, 16]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb200-fp8/8k1k/low-latency.yaml
        - "CONFIG_FILE=recipes/gb200-fp8/8k1k/low-latency.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false

    # "Mid curve" (5 prefill workers at DEP8 and 1 decode worker at DEP32)
    - conc-list: [512, 1024, 2048, 6144]
      prefill:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb200-fp8/8k1k/mid-curve.yaml
        - "CONFIG_FILE=recipes/gb200-fp8/8k1k/mid-curve.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

    # "Max throughput" (6 prefill workers at DEP8 and 1 decode worker at DEP24)
    - conc-list: [2048, 4096, 6144]
      prefill:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb200-fp8/8k1k/max_tpt.yaml
        - "CONFIG_FILE=recipes/gb200-fp8/8k1k/max_tpt.yaml"
      decode:
        num-worker: 1
        tp: 24
        ep: 24
        dp-attn: true

dsr1-fp8-gb300-dynamo-sglang:
  image: lmsysorg/sglang:v0.5.8.post1-cu130
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: gb300
  precision: fp8
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
   # "Low latency" (1 prefill worker at TP4 and 4 decode workers at TP4)
    - conc-list: [4, 8, 16, 32]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb300-fp8/1k1k/stp/low-latency.yaml
        - "CONFIG_FILE=recipes/gb300-fp8/1k1k/stp/low-latency.yaml"
      decode:
        num-worker: 4
        tp: 4
        ep: 1
        dp-attn: false

    # "Mid curve" (2 prefill workers at DEP8 and 1 decode worker at DEP32)
    - conc-list: [1024, 2048, 4096, 6144]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb300-fp8/1k1k/stp/mid.yaml
        - "CONFIG_FILE=recipes/gb300-fp8/1k1k/stp/mid.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

    # "Max throughput" (1 prefill worker at DEP8 and 1 decode worker at DEP8)
    - conc-list: [4096, 7168, 7680]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb300-fp8/1k1k/stp/max.yaml
        - "CONFIG_FILE=recipes/gb300-fp8/1k1k/stp/max.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

  - isl: 8192
    osl: 1024
    search-space:
   # "Low latency" (1 prefill worker at TP4 and 1 decode worker at TP4)
    - conc-list: [4, 8]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb300-fp8/8k1k/stp/low-latency.yaml
        - "CONFIG_FILE=recipes/gb300-fp8/8k1k/stp/low-latency.yaml"
      decode:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false

    # "Mid curve" (5 prefill workers at DEP8 and 1 decode worker at DEP32)
    - conc-list: [128, 256, 512, 1024]
      prefill:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb300-fp8/8k1k/stp/mid.yaml
        - "CONFIG_FILE=recipes/gb300-fp8/8k1k/stp/mid.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

    # "Max throughput" (6 prefill workers at DEP8 and 1 decode worker at DEP24)
    - conc-list: [2048, 4096]
      prefill:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/gb300-fp8/8k1k/stp/max.yaml
        - "CONFIG_FILE=recipes/gb300-fp8/8k1k/stp/max.yaml"
      decode:
        num-worker: 1
        tp: 24
        ep: 24
        dp-attn: true

dsr1-fp4-gb200-dynamo-sglang:
  image: "lmsysorg/sglang:v0.5.8-cu130"
  model: nvidia/DeepSeek-R1-0528-NVFP4-v2
  model-prefix: dsr1
  runner: gb200
  precision: fp4
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  # 1k1k configurations
  - isl: 1024
    osl: 1024
    search-space:
    # Low latency (1 prefill node, 2 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 4, 8, 32 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/gb200-fp4/1k1k/low-latency.yaml"
      decode:
        num-worker: 2
        tp: 4
        ep: 1
        dp-attn: false

    # Mid curve (4 prefill nodes, 8 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 512, 2048, 4096, 8192 ]
      prefill:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/gb200-fp4/1k1k/mid-curve.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

    # Max throughput (4 prefill nodes, 12 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 2048, 4096 ]
      prefill:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/gb200-fp4/1k1k/max-tpt.yaml"
      decode:
        num-worker: 1
        tp: 48
        ep: 48
        dp-attn: true

  # 8k1k configurations
  - isl: 8192
    osl: 1024
    search-space:
    # Low latency (1 prefill node, 4 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 4, 8 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/gb200-fp4/8k1k/low-latency.yaml"
      decode:
        num-worker: 4
        tp: 4
        ep: 1
        dp-attn: false

    # Mid curve (6 prefill nodes, 12 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 512, 2048, 4096 ]
      prefill:
        num-worker: 6
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/gb200-fp4/8k1k/mid-curve.yaml"
      decode:
        num-worker: 1
        tp: 48
        ep: 48
        dp-attn: true

    # Max throughput (10 prefill nodes, 8 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 2048 ]
      prefill:
        num-worker: 10
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/gb200-fp4/8k1k/max-tpt.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

dsr1-fp4-gb300-dynamo-trt:
  image: nvcr.io#nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post2
  model: nvidia/DeepSeek-R1-0528-NVFP4-v2
  model-prefix: dsr1
  runner: gb300
  precision: fp4
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # MTP configurations
    - spec-decoding: "mtp"
      conc-list: [3226]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/mtp/ctx1_gen1_dep4_batch768_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/mtp/ctx1_gen1_dep4_batch768_eplb0_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [333]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/mtp/ctx1_gen1_dep32_batch8_eplb0_mtp.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/mtp/ctx1_gen1_dep32_batch8_eplb0_mtp.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [5]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [8, 12, 24, 48]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/mtp/ctx1_gen4_tep8_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/mtp/ctx1_gen4_tep8_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [2253]
      prefill:
        num-worker: 3
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/mtp/ctx3_gen1_dep16_batch128_eplb256_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/mtp/ctx3_gen1_dep16_batch128_eplb256_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1229]
      prefill:
        num-worker: 3
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/mtp/ctx3_gen1_dep32_batch32_eplb288_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/mtp/ctx3_gen1_dep32_batch32_eplb288_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    # Non-MTP configurations (default spec_decoding="none")
    - conc-list: [5]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [12, 48, 96, 192]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/stp/ctx1_gen4_tep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/stp/ctx1_gen4_tep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [8192]
      prefill:
        num-worker: 2
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/stp/ctx2_gen1_dep8_batch1024_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/stp/ctx2_gen1_dep8_batch1024_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [1229]
      prefill:
        num-worker: 2
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/stp/ctx2_gen1_dep32_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/stp/ctx2_gen1_dep32_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [4301]
      prefill:
        num-worker: 3
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/stp/ctx3_gen1_dep16_batch256_eplb256_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/stp/ctx3_gen1_dep16_batch256_eplb256_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [2253]
      prefill:
        num-worker: 3
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k1k/stp/ctx3_gen1_dep32_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k1k/stp/ctx3_gen1_dep32_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
  - isl: 1024
    osl: 8192
    search-space:
    # MTP configurations (spec_decoding="mtp")
    - spec-decoding: "mtp"
      conc-list: [7]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen7_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen7_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [63]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen7_tep8_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen7_tep8_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [563]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [2088]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen1_dep32_batch64_eplb288_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen1_dep32_batch64_eplb288_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [8192]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen2_dep16_batch256_eplb256_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen2_dep16_batch256_eplb256_mtp1.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [16384]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen4_dep8_batch512_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/mtp/ctx1_gen4_dep8_batch512_eplb0_mtp1.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
    # STP configurations (no spec_decoding)
    - conc-list: [7]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen7_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen7_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [60]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen15_tep4_batch4_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen15_tep4_batch4_eplb0_mtp0.yaml"
      decode:
        num-worker: 15
        tp: 4
        ep: 4
        dp-attn: false
    - conc-list: [245]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen7_tep8_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen7_tep8_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [1024]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen1_dep32_batch32_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen1_dep32_batch32_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [4096]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen1_dep32_batch128_eplb288_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen1_dep32_batch128_eplb288_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [8192]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen1_dep32_batch256_eplb288_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/1k8k/stp/ctx1_gen1_dep32_batch256_eplb288_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # MTP configurations (spec_decoding="mtp")
    - spec-decoding: "mtp"
      conc-list: [33]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/mtp/ctx1_gen3_tep8_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/mtp/ctx1_gen3_tep8_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [5]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [12, 24]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [180]
      prefill:
        num-worker: 4
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/mtp/ctx4_gen1_dep32_batch4_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/mtp/ctx4_gen1_dep32_batch4_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [308]
      prefill:
        num-worker: 8
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/mtp/ctx8_gen1_dep32_batch8_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/mtp/ctx8_gen1_dep32_batch8_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [2253]
      prefill:
        num-worker: 10
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/mtp/ctx10_gen1_dep8_batch256_eplb0_mtp1.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/mtp/ctx10_gen1_dep8_batch256_eplb0_mtp1.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [666]
      prefill:
        num-worker: 10
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/mtp/ctx10_gen1_dep16_batch32_eplb0_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/mtp/ctx10_gen1_dep16_batch32_eplb0_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1127]
      prefill:
        num-worker: 13
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/mtp/ctx13_gen1_dep16_batch64_eplb256_mtp3.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/mtp/ctx13_gen1_dep16_batch64_eplb256_mtp3.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    # Non-MTP configurations (default spec_decoding="none")
    - conc-list: [72]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/stp/ctx1_gen3_tep8_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/stp/ctx1_gen3_tep8_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [5]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [12]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/stp/ctx1_gen4_tep8_batch2_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/stp/ctx1_gen4_tep8_batch2_eplb0_mtp0.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [5, 15, 30]
      prefill:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/stp/ctx1_gen5_tep4_batch4_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/stp/ctx1_gen5_tep4_batch4_eplb0_mtp0.yaml"
      decode:
        num-worker: 5
        tp: 4
        ep: 4
        dp-attn: false
    - conc-list: [666]
      prefill:
        num-worker: 7
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/stp/ctx7_gen1_dep32_batch16_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/stp/ctx7_gen1_dep32_batch16_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [1229]
      prefill:
        num-worker: 9
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/stp/ctx9_gen1_dep16_batch64_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/stp/ctx9_gen1_dep16_batch64_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [3228]
      prefill:
        num-worker: 11
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/stp/ctx11_gen3_dep4_batch256_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/stp/ctx11_gen3_dep4_batch256_eplb0_mtp0.yaml"
      decode:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
    - conc-list: [2253]
      prefill:
        num-worker: 14
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp4/8k1k/stp/ctx14_gen1_dep16_batch128_eplb0_mtp0.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp4/8k1k/stp/ctx14_gen1_dep16_batch128_eplb0_mtp0.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true

dsr1-fp4-gb300-dynamo-sglang:
  image: "lmsysorg/sglang:v0.5.8.post1-cu130-runtime"
  model: nvidia/DeepSeek-R1-0528-NVFP4-v2
  model-prefix: dsr1
  runner: gb300
  precision: fp4
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  # 1k1k configurations
  - isl: 1024
    osl: 1024
    search-space:
    # Low latency (1 prefill node, 2 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 4, 8, 32 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/gb300-fp4/1k1k/low_latency.yaml"
      decode:
        num-worker: 2
        tp: 4
        ep: 1
        dp-attn: false

    # Mid curve (4 prefill nodes, 8 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 512, 2048, 4096, 8192 ]
      prefill:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/gb300-fp4/1k1k/mid_curve.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

    # Max throughput (4 prefill nodes, 12 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 512, 2048, 4096, 8192 ]
      prefill:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/gb300-fp4/1k1k/max_tpt.yaml"
      decode:
        num-worker: 1
        tp: 48
        ep: 48
        dp-attn: true

  # 8k1k configurations
  - isl: 8192
    osl: 1024
    search-space:
    # Low latency (1 prefill node, 4 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 4, 8, 32, 64 ]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/gb300-fp4/8k1k/low_latency.yaml"
      decode:
        num-worker: 4
        tp: 4
        ep: 1
        dp-attn: false

    # Mid curve (6 prefill nodes, 12 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 512, 2048, 4096 ]
      prefill:
        num-worker: 6
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/gb300-fp4/8k1k/mid_curve.yaml"
      decode:
        num-worker: 1
        tp: 48
        ep: 48
        dp-attn: true

    # Max throughput (10 prefill nodes, 8 decode nodes)
    - spec-decoding: "none"
      conc-list: [ 2048 ]
      prefill:
        num-worker: 10
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/gb300-fp4/8k1k/max_tpt.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true

dsr1-fp8-gb300-dynamo-trt:
  image: nvcr.io/nvidia/ai-dynamo/tensorrtllm-runtime:0.8.1.post2
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: gb300
  precision: fp8
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # MTP configurations (spec_decoding="mtp")
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3_8.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3_8.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [24]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3_24.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3_24.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [180]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/mtp/ctx1_gen1_dep32_batch4_eplb0_mtp3_180.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/mtp/ctx1_gen1_dep32_batch4_eplb0_mtp3_180.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [564]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/mtp/ctx2_gen1_dep32_batch16_eplb0_mtp3_564.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/mtp/ctx2_gen1_dep32_batch16_eplb0_mtp3_564.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [666]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/mtp/ctx1_gen1_dep16_batch32_eplb0_mtp3_666.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/mtp/ctx1_gen1_dep16_batch32_eplb0_mtp3_666.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [2253]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/mtp/ctx2_gen1_dep16_batch128_eplb0_mtp1_2253.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/mtp/ctx2_gen1_dep16_batch128_eplb0_mtp1_2253.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [8192]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/mtp/ctx3_gen2_dep8_batch512_eplb0_mtp1_8192.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/mtp/ctx3_gen2_dep8_batch512_eplb0_mtp1_8192.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    # STP configurations (no spec_decoding)
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0_4.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0_4.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [24]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/stp/ctx1_gen4_tep8_batch4_eplb0_mtp0_24.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/stp/ctx1_gen4_tep8_batch4_eplb0_mtp0_24.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [84]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/stp/ctx1_gen4_tep8_batch16_eplb0_mtp0_84.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/stp/ctx1_gen4_tep8_batch16_eplb0_mtp0_84.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [1229]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/stp/ctx2_gen1_dep32_batch32_eplb0_mtp0_1229.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/stp/ctx2_gen1_dep32_batch32_eplb0_mtp0_1229.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [2253]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/stp/ctx2_gen1_dep16_batch128_eplb0_mtp0_2253.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/stp/ctx2_gen1_dep16_batch128_eplb0_mtp0_2253.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [8602]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/stp/ctx3_gen2_dep8_batch512_eplb0_mtp0_8602.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/stp/ctx3_gen2_dep8_batch512_eplb0_mtp0_8602.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [12288]
      prefill:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k1k/stp/ctx3_gen2_dep8_batch768_eplb0_mtp0_12288.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k1k/stp/ctx3_gen2_dep8_batch768_eplb0_mtp0_12288.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # MTP configurations (spec_decoding="mtp")
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3_8.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3_8.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [24]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3_24.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3_24.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [333]
      prefill:
        num-worker: 6
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/mtp/ctx6_gen1_dep32_batch8_eplb0_mtp3_333.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/mtp/ctx6_gen1_dep32_batch8_eplb0_mtp3_333.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [666]
      prefill:
        num-worker: 8
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/mtp/ctx8_gen1_dep16_batch32_eplb0_mtp3_666.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/mtp/ctx8_gen1_dep16_batch32_eplb0_mtp3_666.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1229]
      prefill:
        num-worker: 10
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/mtp/ctx10_gen1_dep16_batch64_eplb0_mtp1_1229.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/mtp/ctx10_gen1_dep16_batch64_eplb0_mtp1_1229.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [1229]
      prefill:
        num-worker: 7
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/mtp/ctx7_gen1_dep8_batch128_eplb0_mtp1_1229.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/mtp/ctx7_gen1_dep8_batch128_eplb0_mtp1_1229.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    # STP configurations (no spec_decoding)
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0_4.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0_4.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [24]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/stp/ctx1_gen4_tep8_batch4_eplb0_mtp0_24.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/stp/ctx1_gen4_tep8_batch4_eplb0_mtp0_24.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [36]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/stp/ctx1_gen4_tep8_batch8_eplb0_mtp0_36.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/stp/ctx1_gen4_tep8_batch8_eplb0_mtp0_36.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [512]
      prefill:
        num-worker: 6
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/stp/ctx6_gen1_dep32_batch16_eplb0_mtp0_512.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/stp/ctx6_gen1_dep32_batch16_eplb0_mtp0_512.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [666]
      prefill:
        num-worker: 4
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/stp/ctx4_gen1_dep16_batch32_eplb0_mtp0_666.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/stp/ctx4_gen1_dep16_batch32_eplb0_mtp0_666.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [1229]
      prefill:
        num-worker: 7
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/stp/ctx7_gen1_dep16_batch64_eplb0_mtp0_1229.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/stp/ctx7_gen1_dep16_batch64_eplb0_mtp0_1229.yaml"
      decode:
        num-worker: 1
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [2151]
      prefill:
        num-worker: 7
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/8k1k/stp/ctx7_gen1_dep8_batch256_eplb0_mtp0_2151.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/8k1k/stp/ctx7_gen1_dep8_batch256_eplb0_mtp0_2151.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
  - isl: 1024
    osl: 8192
    search-space:
    # MTP configurations (spec_decoding="mtp")
    - spec-decoding: "mtp"
      conc-list: [4]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3_4.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen4_tep8_batch1_eplb0_mtp3_4.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [16]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3_16.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen4_tep8_batch4_eplb0_mtp3_16.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [141]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen1_dep32_batch4_eplb0_mtp3_141.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen1_dep32_batch4_eplb0_mtp3_141.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [544]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3_544.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen1_dep32_batch16_eplb0_mtp3_544.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [2048]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen2_dep16_batch64_eplb0_mtp1_2048.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen2_dep16_batch64_eplb0_mtp1_2048.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [8192]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen4_dep8_batch256_eplb0_mtp1_8192.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/mtp/ctx1_gen4_dep8_batch256_eplb0_mtp1_8192.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: true
    # STP configurations (no spec_decoding)
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0_4.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen4_tep8_batch1_eplb0_mtp0_4.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [36]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen4_tep8_batch8_eplb0_mtp0_36.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen4_tep8_batch8_eplb0_mtp0_36.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [282]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen1_dep32_batch8_eplb0_mtp0_282.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen1_dep32_batch8_eplb0_mtp0_282.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [1024]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen1_dep32_batch32_eplb0_mtp0_1024.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen1_dep32_batch32_eplb0_mtp0_1024.yaml"
      decode:
        num-worker: 1
        tp: 32
        ep: 32
        dp-attn: true
    - conc-list: [4096]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen2_dep16_batch128_eplb0_mtp0_4096.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen2_dep16_batch128_eplb0_mtp0_4096.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true
    - conc-list: [8192]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen2_dep16_batch256_eplb0_mtp0_8192.yaml
        - "CONFIG_FILE=recipes/trtllm/gb300-fp8/1k8k/stp/ctx1_gen2_dep16_batch256_eplb0_mtp0_8192.yaml"
      decode:
        num-worker: 2
        tp: 16
        ep: 16
        dp-attn: true


gptoss-fp4-gb200-dynamo-trt:
  image: nvcr.io#nvidia/ai-dynamo/tensorrtllm-runtime:0.7.0.post2
  model: openai/gpt-oss-120b
  model-prefix: gptoss
  runner: gb200
  precision: fp4
  framework: dynamo-trt
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    #Right of pareto
    #P: 1xTP1   D:1xTP4
    - spec-decoding: "none"
      conc-list: [ 1, 2, 4, 16, 32, 64, 128 ]
      prefill:
        num-worker: 1
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=256"
        - "DECODE_GPU_MEM_FRACTION=0.9"

# P: 1xTP1   D:4xTP2
    - spec-decoding: "none"
      conc-list: [ 16 ]
      prefill:
        num-worker: 1
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 4
        tp: 2
        ep: 1
        dp-attn: false
        additional-settings:
        - "DECODE_NODES=2"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=32"
        - "DECODE_GPU_MEM_FRACTION=0.9"

  # P: 1xTP1   D:1xDEP2
    - spec-decoding: "none"
      conc-list: [ 256, 512, 1024, 2048, 2560 ]
      prefill:
        num-worker: 1
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=1536"
        - "DECODE_GPU_MEM_FRACTION=0.9"

  # P: 1xTP1   D:2xDEP2
    - spec-decoding: "none"
      conc-list: [ 512, 1024, 2048, 2560 ]
      prefill:
        num-worker: 1
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 2
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=1536"
        - "DECODE_GPU_MEM_FRACTION=0.9"

  # P: 1xTP1   D:1xDEP4
    - spec-decoding: "none"
      conc-list: [ 256, 1024, 1536 ]
      prefill:
        num-worker: 1
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=512"
        - "DECODE_GPU_MEM_FRACTION=0.9"

# P: 1xTP1   D:3xDEP4
    - spec-decoding: "none"
      conc-list: [ 3072 ]
      prefill:
        num-worker: 1
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 3
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=1024"
        - "DECODE_GPU_MEM_FRACTION=0.9"

  - isl: 8192
    osl: 1024
    search-space:
    # Right side of pareto
    - spec-decoding: "none"
      conc-list: [1]
      prefill:
        num-worker: 1
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 1  
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "DECODE_NODES=2"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=4"
        - "DECODE_GPU_MEM_FRACTION=0.9"

    - spec-decoding: "none"
      conc-list: [2, 4, 8, 16, 32, 64]
      prefill:
        num-worker: 1
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 1  
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=128"
        - "DECODE_GPU_MEM_FRACTION=0.9"

# Middle of pareto
# P: 2xTP1   D:1xTP4
    - spec-decoding: "none"
      conc-list: [128, 512]
      prefill:
        num-worker: 2
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 1  
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=1024"
        - "DECODE_GPU_MEM_FRACTION=0.9"

# P: 2xTP1   D:1xTP2
    - spec-decoding: "none"
      conc-list: [256, 384]
      prefill:
        num-worker: 2
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 1  
        tp: 2
        ep: 1
        dp-attn: false
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=512"
        - "DECODE_GPU_MEM_FRACTION=0.9"

# P: 2xTP1   D:1xDEP2
    - spec-decoding: "none"
      conc-list: [128, 512]
      prefill:
        num-worker: 2
        tp: 1
        ep: 1
        dp-attn: false
        additional-settings:
        - "PREFILL_NODES=1"
        - "PREFILL_MAX_NUM_TOKENS=20000"
        - "PREFILL_MAX_BATCH_SIZE=32"
      decode:
        num-worker: 1
        tp: 2
        ep: 2
        dp-attn: true
        additional-settings:
        - "DECODE_NODES=1"
        - "DECODE_MAX_NUM_TOKENS=20000"
        - "DECODE_MAX_BATCH_SIZE=512"
        - "DECODE_GPU_MEM_FRACTION=0.9"


dsr1-fp8-h200-dynamo-sglang:
  image: lmsysorg/sglang:v0.5.8.post1-cu130
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: h200-multinode-slurm
  precision: fp8
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # STP: Low latency (1 prefill, 9 decode, TEP)
    - spec-decoding: "none"
      conc-list: [1, 4, 8, 16, 32, 64, 128, 256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/1k1k/low-latency-1p9d.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 1
        dp-attn: false
    # STP: High throughput TEP (1 prefill, 6 decode)
    - spec-decoding: "none"
      conc-list: [512, 1024, 2048]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/1k1k/bs256-1p6d-tp.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 1
        dp-attn: false
    # STP: High throughput DEP (1 prefill, 6 decode, dp-attention)
    - spec-decoding: "none"
      conc-list: [128, 256, 512, 1024, 2048]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/h200/1k1k/bs256-1p6d-dep.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: true
    # MTP: Low latency (1 prefill, 9 decode, TEP)
    - spec-decoding: "mtp"
      conc-list: [1, 4, 8, 16, 32, 64, 128, 256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/1k1k/low-latency-1p9d-mtp.yaml"
      decode:
        num-worker: 9
        tp: 8
        ep: 1
        dp-attn: false
    # MTP: High throughput TEP (1 prefill, 6 decode)
    - spec-decoding: "mtp"
      conc-list: [512, 1024, 2048]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/1k1k/bs256-1p6d-tp-mtp.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 1
        dp-attn: false
    # MTP: High throughput DEP (1 prefill, 6 decode, dp-attention)
    - spec-decoding: "mtp"
      conc-list: [128, 256, 512, 1024, 2048]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/h200/1k1k/bs256-1p6d-dep-mtp.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # STP: Low latency TEP (1 prefill, 7 decode)
    - spec-decoding: "none"
      conc-list: [1, 4, 8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs4-1p7d.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 1
        dp-attn: false
    # STP: TEP (1 prefill, 6 decode)
    - spec-decoding: "none"
      conc-list: [4, 8, 16]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs8-1p6d.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 1
        dp-attn: false
    # STP: TEP (1 prefill, 3 decode)
    - spec-decoding: "none"
      conc-list: [8, 16, 32]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs16-1p3d.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 1
        dp-attn: false
    # STP: TEP (2 prefill, 3 decode)
    - spec-decoding: "none"
      conc-list: [32, 64, 128]
      prefill:
        num-worker: 2
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs64-2p3d.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 1
        dp-attn: false
    # STP: High throughput DEP (1 prefill, 1 decode, dp-attention)
    - spec-decoding: "none"
      conc-list: [64, 128, 256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs128-1p1d-dep.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    # MTP: Low latency TEP (1 prefill, 7 decode)
    - spec-decoding: "mtp"
      conc-list: [1, 4, 8]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs4-1p7d-mtp.yaml"
      decode:
        num-worker: 7
        tp: 8
        ep: 1
        dp-attn: false
    # MTP: TEP (1 prefill, 6 decode)
    - spec-decoding: "mtp"
      conc-list: [2, 4, 8, 16, 32]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs8-1p6d-mtp.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 1
        dp-attn: false
    # MTP: TEP (1 prefill, 3 decode)
    - spec-decoding: "mtp"
      conc-list: [4, 8, 16, 32, 64]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs16-1p3d-mtp.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 1
        dp-attn: false
    # MTP: TEP (2 prefill, 3 decode)
    - spec-decoding: "mtp"
      conc-list: [32, 64, 128]
      prefill:
        num-worker: 2
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs64-2p3d-mtp.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 1
        dp-attn: false
    # MTP: High throughput DEP (1 prefill, 1 decode, dp-attention)
    - spec-decoding: "mtp"
      conc-list: [32, 64, 128, 256, 512]
      prefill:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/h200/8k1k/bs128-1p1d-dep-mtp.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

dsr1-fp4-b200-dynamo-sglang:
  image: lmsysorg/sglang:v0.5.8.post1-cu130-runtime
  model: deepseek-r1-fp4
  model-prefix: dsr1
  runner: b200-multinode-slurm
  precision: fp4
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # Non-MTP configurations
    - conc-list: [16, 128]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/1k1k/stp/low-latency-dep4-1p-tep8-5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [32, 64, 256]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/1k1k/stp/low-latency-dep4-1p-tep8-6d.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [512]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/1k1k/stp/max-tpt-dep4-1p-dep8-1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [512]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/1k1k/stp/max-tpt-dep4-1p-dep8-2d.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # Non-MTP configurations
    - conc-list: [64, 128]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/stp/low-latency-dep4-1p-tep8-1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [8]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/stp/low-latency-dep4-1p-tep8-5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [4, 128]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/stp/low-latency-dep4-2p-tep8-5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [4, 8, 16, 64]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/stp/low-latency-tp4-1p-tp8-1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
    - conc-list: [1024, 2048]
      prefill:
        num-worker: 7
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/stp/max-tpt-dep4-7p-dep8-2d.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true

dsr1-fp8-b200-dynamo-sglang:
  image: lmsysorg/sglang:v0.5.8.post1-cu130-amd64
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: b200-multinode-slurm
  precision: fp8
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # Non-MTP configurations
    - conc-list: [4]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/stp/low-latency-tep8-1p1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [16, 32, 64, 128, 256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/stp/low-latency-tep8-1p3d.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [1024, 2048, 4096]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/stp/max-tpt-dep8-1p5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [2048, 4096]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/stp/max-tpt-dep8-2p5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # Non-MTP configurations
    - conc-list: [4, 32, 64, 512]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/stp/low-latency-tep8-1p1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [64, 512]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/stp/low-latency-tep8-1p4d.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [32]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/stp/low-latency-tep8-1p6d.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: false
    - conc-list: [128, 512, 1024]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/stp/max-tpt-dep8-1p1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - conc-list: [256, 512, 1024]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/stp/max-tpt-dep8-2p1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

dsr1-fp8-b200-dynamo-sglang-mtp:
  image: lmsysorg/sglang:v0.5.8.post1-cu130-amd64
  model: deepseek-ai/DeepSeek-R1-0528
  model-prefix: dsr1
  runner: b200-multinode-slurm
  precision: fp8
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    # MTP low-latency: 1P1D
    - spec-decoding: "mtp"
      conc-list: [4, 64]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/mtp/low-latency-tep8-1p1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
    # MTP low-latency: 1P3D
    - spec-decoding: "mtp"
      conc-list: [4, 8, 16, 32, 128]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/mtp/low-latency-tep8-1p3d.yaml"
      decode:
        num-worker: 3
        tp: 8
        ep: 8
        dp-attn: false
    # MTP max-tpt: 1P5D
    - spec-decoding: "mtp"
      conc-list: [512, 4096]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/mtp/max-tpt-dep8-1p5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
    # MTP max-tpt: 2P5D
    - spec-decoding: "mtp"
      conc-list: [1024, 2048, 4096]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/mtp/max-tpt-dep8-2p5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: true
    # MTP max-tpt: 1P2D
    - spec-decoding: "mtp"
      conc-list: [512, 1024, 2048]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/1k1k/mtp/max-tpt-dep8-1p2d.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
  - isl: 8192
    osl: 1024
    search-space:
    # MTP low-latency: 1P1D
    - spec-decoding: "mtp"
      conc-list: [16, 32, 64]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/mtp/low-latency-tep8-1p1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
    # MTP low-latency: 1P4D
    - spec-decoding: "mtp"
      conc-list: [8, 256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/mtp/low-latency-tep8-1p4d.yaml"
      decode:
        num-worker: 4
        tp: 8
        ep: 8
        dp-attn: false
    # MTP low-latency: 1P6D
    - spec-decoding: "mtp"
      conc-list: [4, 8, 16, 256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/mtp/low-latency-tep8-1p6d.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: false
    # MTP max-tpt: 1P1D
    - spec-decoding: "mtp"
      conc-list: [256]
      prefill:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/mtp/max-tpt-dep8-1p1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    # MTP max-tpt: 2P1D
    - spec-decoding: "mtp"
      conc-list: [128, 512]
      prefill:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true
        additional-settings:
        - "CONFIG_FILE=recipes/b200-fp8/8k1k/mtp/max-tpt-dep8-2p1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true

dsr1-fp4-b200-dynamo-sglang-mtp:
  image: "lmsysorg/sglang:v0.5.8.post1-cu130"
  model: deepseek-r1-fp4
  model-prefix: dsr1
  runner: b200-multinode-slurm
  precision: fp4
  framework: dynamo-sglang
  multinode: true
  disagg: true
  seq-len-configs:
  - isl: 1024
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [16, 512]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/b200-fp4/1k1k/mtp/low-latency-dep4-1p-tep8-5d.yaml
        - "CONFIG_FILE=recipes/b200-fp4/1k1k/mtp/low-latency-dep4-1p-tep8-5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [32, 64, 256, 512]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/b200-fp4/1k1k/mtp/low-latency-dep4-1p-tep8-6d.yaml
        - "CONFIG_FILE=recipes/b200-fp4/1k1k/mtp/low-latency-dep4-1p-tep8-6d.yaml"
      decode:
        num-worker: 6
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [512, 1024]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/b200-fp4/1k1k/mtp/max-tpt-dep4-1p-dep8-1d.yaml
        - "CONFIG_FILE=recipes/b200-fp4/1k1k/mtp/max-tpt-dep4-1p-dep8-1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: true
    - spec-decoding: "mtp"
      conc-list: [512]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/b200-fp4/1k1k/mtp/max-tpt-dep4-1p-dep8-2d.yaml
        - "CONFIG_FILE=recipes/b200-fp4/1k1k/mtp/max-tpt-dep4-1p-dep8-2d.yaml"
      decode:
        num-worker: 2
        tp: 8
        ep: 8
        dp-attn: true



  - isl: 8192
    osl: 1024
    search-space:
    - spec-decoding: "mtp"
      conc-list: [64, 128]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/b200-fp4/8k1k/mtp/low-latency-dep4-1p-tep8-1d.yaml
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/mtp/low-latency-dep4-1p-tep8-1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [8]
      prefill:
        num-worker: 1
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/b200-fp4/8k1k/mtp/low-latency-dep4-1p-tep8-5d.yaml
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/mtp/low-latency-dep4-1p-tep8-5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [4, 128]
      prefill:
        num-worker: 2
        tp: 4
        ep: 4
        dp-attn: true
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/b200-fp4/8k1k/mtp/low-latency-dep4-2p-tep8-5d.yaml
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/mtp/low-latency-dep4-2p-tep8-5d.yaml"
      decode:
        num-worker: 5
        tp: 8
        ep: 8
        dp-attn: false
    - spec-decoding: "mtp"
      conc-list: [4, 8, 16, 64]
      prefill:
        num-worker: 1
        tp: 4
        ep: 1
        dp-attn: false
        additional-settings:
        # https://github.com/ishandhanani/srt-slurm/blob/sa-submission-q1-2026/recipes/b200-fp4/8k1k/mtp/low-latency-tp4-1p-tp8-1d.yaml
        - "CONFIG_FILE=recipes/b200-fp4/8k1k/mtp/low-latency-tp4-1p-tp8-1d.yaml"
      decode:
        num-worker: 1
        tp: 8
        ep: 1
        dp-attn: false
